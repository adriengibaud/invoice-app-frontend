{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ichbinrodolf/projects/invoices-app/invoice-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/ichbinrodolf/projects/invoices-app/invoice-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;/* eslint-disable react/button-has-type */import React,{useEffect,useState,useRef}from'react';import{useDispatch,useSelector}from'react-redux';import{setActiveUser,setUserLogoutState,selectUserEmail,selectUserName,selectUserImage}from'reducers/userSlice';import styled from'styled-components';import{auth,provider}from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=function Auth(){var dispatch=useDispatch();var userName=useSelector(selectUserName);var userEmail=useSelector(selectUserEmail);var userImage=useSelector(selectUserImage);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openMenu=_useState2[0],setOpenMenu=_useState2[1];var handleSignIn=function handleSignIn(){auth.signInWithPopup(provider).then(function(){return setOpenMenu(false);});};var handleSignOut=function handleSignOut(){auth.signOut().then(function(){dispatch(setUserLogoutState());}).catch(function(err){return alert(err);});};useEffect(function(){if(userName===null){auth.onAuthStateChanged(function(user){if(user!==null&&userEmail===null){console.log(user);dispatch(setActiveUser({userName:user.displayName,userEmail:user.email,userId:user.uid,userImage:user.photoURL}));}});}},[]);var authContainer=useRef();var handleClick=function handleClick(e){if(authContainer.current.contains(e.target)){return setOpenMenu(true);}return setOpenMenu(false);};useEffect(function(){document.addEventListener('mousedown',handleClick);return function(){document.removeEventListener('mousedown',handleClick);};},[]);return/*#__PURE__*/_jsx(AuthContainer,{ref:authContainer,children:/*#__PURE__*/_jsx(\"div\",{children:userName?/*#__PURE__*/_jsxs(UserImage,{children:[userImage?/*#__PURE__*/_jsx(\"img\",{src:userImage,alt:\"\"}):/*#__PURE__*/_jsx(AltImage,{children:userName[0]}),/*#__PURE__*/_jsx(LogoutMenu,{openMenu:openMenu,onClick:handleSignOut,children:\"Log out\"})]}):/*#__PURE__*/_jsx(LoginButton,{onClick:handleSignIn,children:\"Sign in\"})})});};export default Auth;var AuthContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  @media screen and (max-width: 900px) {\\n    height: 80px;\\n    width: 80px;\\n    margin: 0 30px;\\n  }\\n\"])));var AltImage=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 60%;\\n  height: 60%;\\n  background: red;\\n\"])));var UserImage=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  margin: 20px 0;\\n  img {\\n    border-radius: 50%;\\n    width: 60%;\\n  }\\n\"])));var LoginButton=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 80px;\\n  border: none;\\n  background: none;\\n  color: \",\";\\n\"])),function(props){return props.theme.colors.white;});var LogoutMenu=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: \",\";\\n  position: absolute;\\n  z-index: 100;\\n  background: \",\";\\n  width: 100px;\\n  height: 40px;\\n  text-align: center;\\n  line-height: 40px;\\n  border-radius: 10px;\\n  cursor: pointer;\\n\"])),function(props){return props.openMenu?'block':'none';},function(props){return props.theme.colors.white;});","map":{"version":3,"sources":["/Users/ichbinrodolf/projects/invoices-app/invoice-app-frontend/src/components/auth/Auth.jsx"],"names":["React","useEffect","useState","useRef","useDispatch","useSelector","setActiveUser","setUserLogoutState","selectUserEmail","selectUserName","selectUserImage","styled","auth","provider","Auth","dispatch","userName","userEmail","userImage","openMenu","setOpenMenu","handleSignIn","signInWithPopup","then","handleSignOut","signOut","catch","err","alert","onAuthStateChanged","user","console","log","displayName","email","userId","uid","photoURL","authContainer","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","AuthContainer","div","AltImage","UserImage","LoginButton","button","props","theme","colors","white","LogoutMenu"],"mappings":"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","sourcesContent":["/* eslint-disable react/button-has-type */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  setActiveUser,\n  setUserLogoutState,\n  selectUserEmail,\n  selectUserName,\n  selectUserImage,\n} from 'reducers/userSlice';\nimport styled from 'styled-components';\nimport { auth, provider } from '../../firebase';\n\nconst Auth = () => {\n  const dispatch = useDispatch();\n  const userName = useSelector(selectUserName);\n  const userEmail = useSelector(selectUserEmail);\n  const userImage = useSelector(selectUserImage);\n  const [openMenu, setOpenMenu] = useState(false);\n\n  const handleSignIn = () => {\n    auth.signInWithPopup(provider).then(() => setOpenMenu(false));\n  };\n  const handleSignOut = () => {\n    auth\n      .signOut()\n      .then(() => {\n        dispatch(setUserLogoutState());\n      })\n      .catch((err) => alert(err));\n  };\n\n  useEffect(() => {\n    if (userName === null) {\n      auth.onAuthStateChanged((user) => {\n        if (user !== null && userEmail === null) {\n          console.log(user);\n          dispatch(\n            setActiveUser({\n              userName: user.displayName,\n              userEmail: user.email,\n              userId: user.uid,\n              userImage: user.photoURL,\n            })\n          );\n        }\n      });\n    }\n  }, []);\n\n  const authContainer = useRef();\n\n  const handleClick = (e) => {\n    if (authContainer.current.contains(e.target)) {\n      return setOpenMenu(true);\n    }\n    return setOpenMenu(false);\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClick);\n    return () => {\n      document.removeEventListener('mousedown', handleClick);\n    };\n  }, []);\n\n  return (\n    <AuthContainer ref={authContainer}>\n      <div>\n        {userName ? (\n          <UserImage>\n            {userImage ? <img src={userImage} alt=\"\" /> : <AltImage>{userName[0]}</AltImage>}\n            <LogoutMenu openMenu={openMenu} onClick={handleSignOut}>\n              Log out\n            </LogoutMenu>\n          </UserImage>\n        ) : (\n          <LoginButton onClick={handleSignIn}>Sign in</LoginButton>\n        )}\n      </div>\n    </AuthContainer>\n  );\n};\n\nexport default Auth;\n\nconst AuthContainer = styled.div`\n  width: 100%;\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  @media screen and (max-width: 900px) {\n    height: 80px;\n    width: 80px;\n    margin: 0 30px;\n  }\n`;\n\nconst AltImage = styled.div`\n  width: 60%;\n  height: 60%;\n  background: red;\n`;\n\nconst UserImage = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 20px 0;\n  img {\n    border-radius: 50%;\n    width: 60%;\n  }\n`;\n\nconst LoginButton = styled.button`\n  width: 80px;\n  border: none;\n  background: none;\n  color: ${(props) => props.theme.colors.white};\n`;\n\nconst LogoutMenu = styled.div`\n  display: ${(props) => (props.openMenu ? 'block' : 'none')};\n  position: absolute;\n  z-index: 100;\n  background: ${(props) => props.theme.colors.white};\n  width: 100px;\n  height: 40px;\n  text-align: center;\n  line-height: 40px;\n  border-radius: 10px;\n  cursor: pointer;\n`;\n"]},"metadata":{},"sourceType":"module"}