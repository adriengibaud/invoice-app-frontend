{"ast":null,"code":"var _jsxFileName = \"/Users/ichbinrodolf/projects/invoices-app/invoice-app-frontend/src/components/auth/Auth.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react/button-has-type */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setActiveUser, setUserLogoutState, selectUserName, selectUserImage } from 'reducers/userSlice';\nimport { auth, provider } from '../../firebase';\nimport AuthButton from './AuthButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Auth = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const userName = useSelector(selectUserName);\n  const userImage = useSelector(selectUserImage);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const handleSignIn = () => {\n    auth.signInWithPopup(provider);\n  };\n\n  const handleSignOut = () => {\n    auth.signOut().then(() => {\n      dispatch(setUserLogoutState());\n    }).catch(err => alert(err));\n  };\n\n  useEffect(() => {\n    if (userName === null) {\n      setIsMenuOpen(false);\n      auth.onAuthStateChanged(user => {\n        if (user !== null) {\n          console.log(user);\n          dispatch(setActiveUser({\n            userName: user.displayName,\n            userEmail: user.email,\n            userId: user.uid,\n            userImage: user.photoURL\n          }));\n        }\n      });\n    }\n  });\n  const authContainer = useRef();\n\n  const handleClick = e => {\n    if (authContainer.current.contains(e.target)) {\n      return setIsMenuOpen(true);\n    }\n\n    return setIsMenuOpen(false);\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClick);\n    return () => {\n      document.removeEventListener('mousedown', handleClick);\n    };\n  }, []);\n\n  const closeMenu = () => {\n    console.log('menu fermé');\n    setIsMenuOpen(false);\n  };\n\n  const openMenu = () => setIsMenuOpen(true);\n\n  return /*#__PURE__*/_jsxDEV(AuthContainer, {\n    ref: authContainer,\n    children: userName && /*#__PURE__*/_jsxDEV(AuthButton, {\n      userName: userName,\n      userImage: userImage,\n      signIn: handleSignIn,\n      signOut: handleSignOut,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      menuState: isMenuOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Auth, \"0oQrlr+02o495Be78Foe6RDBbzA=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Auth;\nexport default Auth;\nconst AuthContainer = styled.div`\n  width: 100%;\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  @media screen and (max-width: 900px) {\n    height: 80px;\n    width: 80px;\n    margin: 0 30px;\n  }\n`;\n_c2 = AuthContainer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Auth\");\n$RefreshReg$(_c2, \"AuthContainer\");","map":{"version":3,"sources":["/Users/ichbinrodolf/projects/invoices-app/invoice-app-frontend/src/components/auth/Auth.jsx"],"names":["React","useEffect","useState","useRef","useDispatch","useSelector","setActiveUser","setUserLogoutState","selectUserName","selectUserImage","auth","provider","AuthButton","Auth","dispatch","userName","userImage","isMenuOpen","setIsMenuOpen","handleSignIn","signInWithPopup","handleSignOut","signOut","then","catch","err","alert","onAuthStateChanged","user","console","log","displayName","userEmail","email","userId","uid","photoURL","authContainer","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","closeMenu","openMenu","AuthContainer","styled","div"],"mappings":"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","sourcesContent":["/* eslint-disable react/button-has-type */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport {\n  setActiveUser,\n  setUserLogoutState,\n  selectUserName,\n  selectUserImage,\n} from 'reducers/userSlice';\nimport { auth, provider } from '../../firebase';\nimport AuthButton from './AuthButton';\n\nconst Auth = () => {\n  const dispatch = useDispatch();\n  const userName = useSelector(selectUserName);\n  const userImage = useSelector(selectUserImage);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const handleSignIn = () => {\n    auth.signInWithPopup(provider);\n  };\n  const handleSignOut = () => {\n    auth\n      .signOut()\n      .then(() => {\n        dispatch(setUserLogoutState());\n      })\n      .catch((err) => alert(err));\n  };\n\n  useEffect(() => {\n    if (userName === null) {\n      setIsMenuOpen(false);\n      auth.onAuthStateChanged((user) => {\n        if (user !== null) {\n          console.log(user);\n          dispatch(\n            setActiveUser({\n              userName: user.displayName,\n              userEmail: user.email,\n              userId: user.uid,\n              userImage: user.photoURL,\n            })\n          );\n        }\n      });\n    }\n  });\n\n  const authContainer = useRef();\n\n  const handleClick = (e) => {\n    if (authContainer.current.contains(e.target)) {\n      return setIsMenuOpen(true);\n    }\n    return setIsMenuOpen(false);\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClick);\n    return () => {\n      document.removeEventListener('mousedown', handleClick);\n    };\n  }, []);\n\n  const closeMenu = () => {\n    console.log('menu fermé');\n    setIsMenuOpen(false);\n  };\n  const openMenu = () => setIsMenuOpen(true);\n\n  return (\n    <AuthContainer ref={authContainer}>\n      {userName && (\n        <AuthButton\n          userName={userName}\n          userImage={userImage}\n          signIn={handleSignIn}\n          signOut={handleSignOut}\n          openMenu={openMenu}\n          closeMenu={closeMenu}\n          menuState={isMenuOpen}\n        />\n      )}\n    </AuthContainer>\n  );\n};\n\nexport default Auth;\n\nconst AuthContainer = styled.div`\n  width: 100%;\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  @media screen and (max-width: 900px) {\n    height: 80px;\n    width: 80px;\n    margin: 0 30px;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}